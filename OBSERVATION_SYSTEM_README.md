# ğŸ”¬ å®éªŒè§‚æµ‹ç³»ç»Ÿä½¿ç”¨æŒ‡å—

å®éªŒè§‚æµ‹ç³»ç»Ÿä¸ºæ‚¨çš„æ— ç›‘ç£ç»éªŒç§¯ç´¯å®éªŒæä¾›å…¨é¢çš„å¯è§‚æµ‹æ€§ï¼ŒåŒ…æ‹¬å®æ—¶ç›‘æ§ã€è¿‡ç¨‹å¯è§†åŒ–å’Œæ·±åº¦åˆ†æã€‚

## ğŸš€ æ ¸å¿ƒç‰¹æ€§

### 1. å®æ—¶ç›‘æ§
- **Episodeçº§ç›‘æ§**: æˆåŠŸç‡ã€å¥–åŠ±ã€æ­¥æ•°ç­‰å…³é”®æŒ‡æ ‡
- **æŠ€èƒ½å­¦ä¹ è¿½è¸ª**: æŠ€èƒ½å‘ç°ã€æ¼”è¿›å’Œä½¿ç”¨ç»Ÿè®¡
- **é”™è¯¯ç›‘æ§**: è‡ªåŠ¨æ£€æµ‹å’ŒæŠ¥å‘Šå®éªŒä¸­çš„å¼‚å¸¸
- **æ€§èƒ½ç›‘æ§**: å†…å­˜ä½¿ç”¨ã€å¤„ç†é€Ÿåº¦ç­‰ç³»ç»ŸæŒ‡æ ‡

### 2. å¯è§†åŒ–ç•Œé¢
- **Webä»ªè¡¨æ¿**: äº¤äº’å¼å®æ—¶ç›‘æ§ç•Œé¢
- **å®æ—¶å›¾è¡¨**: åŠ¨æ€æ›´æ–°çš„å­¦ä¹ æ›²çº¿å’Œç»Ÿè®¡å›¾è¡¨
- **è½¨è¿¹å¯è§†åŒ–**: Episodeæ‰§è¡Œè¿‡ç¨‹çš„è¯¦ç»†å¯è§†åŒ–
- **æŠ€èƒ½æ¼”è¿›å›¾**: æŠ€èƒ½å­¦ä¹ å’Œæ”¹è¿›è¿‡ç¨‹çš„å¯è§†åŒ–

### 3. æ·±åº¦åˆ†æ
- **å¯¹æ¯”åˆ†æ**: ä¸åŒé…ç½®ä¹‹é—´çš„è¯¦ç»†å¯¹æ¯”
- **æŠ€èƒ½åˆ†æ**: æŠ€èƒ½å­¦ä¹ æ¨¡å¼å’Œæ•ˆæœåˆ†æ
- **è¶‹åŠ¿åˆ†æ**: é•¿æœŸå­¦ä¹ è¶‹åŠ¿å’Œç¨³å®šæ€§åˆ†æ
- **æŠ¥å‘Šç”Ÿæˆ**: è‡ªåŠ¨ç”Ÿæˆè¯¦ç»†çš„å®éªŒæŠ¥å‘Š

## ğŸ“¦ å®‰è£…å’Œè®¾ç½®

### 1. å®‰è£…ä¾èµ–
```bash
# è¿è¡Œå®‰è£…è„šæœ¬
chmod +x install_observation_deps.sh
./install_observation_deps.sh

# æˆ–æ‰‹åŠ¨å®‰è£…
pip install matplotlib numpy pandas flask flask-socketio plotly seaborn pyyaml psutil
```

### 2. é…ç½®ç³»ç»Ÿ
è§‚æµ‹ç³»ç»Ÿä½¿ç”¨ `observation_config.yaml` è¿›è¡Œé…ç½®ï¼š

```yaml
observation:
  enabled: true
  web_dashboard:
    enabled: true
    port: 5000
  console_reporting:
    enabled: true
    interval_seconds: 10
  visualization:
    real_time_plots: true
    trajectory_analysis: true
```

## ğŸ® ä½¿ç”¨æ–¹æ³•

### 1. å¿«é€Ÿå¼€å§‹ - æ¼”ç¤ºå®éªŒ
```bash
# è¿è¡Œå¿«é€Ÿæ¼”ç¤ºï¼ˆ30ä¸ªepisodesï¼‰
python run_observable_experiment.py --demo

# æ¼”ç¤ºå¹¶è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨
python run_observable_experiment.py --demo --open-browser
```

### 2. å®Œæ•´å®éªŒ
```bash
# è¿è¡Œå®Œæ•´å¯¹æ¯”å®éªŒ
python run_observable_experiment.py --full --episodes 200

# æŒ‡å®šæ¨¡å‹å’Œç­–ç•¥
python run_observable_experiment.py --full \
  --models gpt-3.5-turbo gpt-4 \
  --strategies balanced aggressive conservative \
  --episodes 150
```

### 3. è‡ªå®šä¹‰é…ç½®
```bash
# ä½¿ç”¨è‡ªå®šä¹‰é…ç½®æ–‡ä»¶
python run_observable_experiment.py --config my_config.yaml
```

### 4. ç¨‹åºé›†æˆ
```python
from observable_experiment_runner import ObservableExperimentRunner

# åˆ›å»ºå¯è§‚æµ‹å®éªŒè¿è¡Œå™¨
runner = ObservableExperimentRunner(
    "logs/my_experiment",
    enable_observation=True,
    web_port=5000
)

# è¿è¡Œå®éªŒ
results = await runner.run_comparative_experiment(
    num_episodes=100,
    models=["gpt-3.5-turbo"],
    strategies=["balanced"]
)
```

## ğŸ“Š ç›‘æ§ç•Œé¢

### Webä»ªè¡¨æ¿
è®¿é—® `http://localhost:5000` æŸ¥çœ‹å®æ—¶ç›‘æ§ç•Œé¢ï¼ŒåŒ…æ‹¬ï¼š

- **å®æ—¶æŒ‡æ ‡é¢æ¿**: æ˜¾ç¤ºå½“å‰å®éªŒçš„å…³é”®æŒ‡æ ‡
- **æˆåŠŸç‡è¶‹åŠ¿å›¾**: å®æ—¶æ›´æ–°çš„æˆåŠŸç‡æ›²çº¿
- **å¥–åŠ±è¶‹åŠ¿å›¾**: å¹³å‡å¥–åŠ±çš„å˜åŒ–è¶‹åŠ¿
- **æŠ€èƒ½åˆ†æé¢æ¿**: æŠ€èƒ½å­¦ä¹ å’Œä½¿ç”¨ç»Ÿè®¡
- **å®æ—¶æ—¥å¿—**: ç³»ç»Ÿäº‹ä»¶å’Œé”™è¯¯æ—¥å¿—

### æ§åˆ¶å°è¾“å‡º
ç³»ç»Ÿæ¯10ç§’åœ¨æ§åˆ¶å°è¾“å‡ºç›‘æ§æŠ¥å‘Šï¼š
```
ğŸ“Š å®éªŒç›‘æ§æŠ¥å‘Š - 14:30:25
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ”¬ gpt-3.5-turbo_balanced_baseline:
  æ´»è·ƒEpisodes: 2
  æœ€è¿‘æˆåŠŸç‡: 0.650
  å¹³å‡å¥–åŠ±: 0.847
  å¹³å‡æ­¥æ•°: 12.3

ğŸ”¬ gpt-3.5-turbo_balanced_with_experience:
  æ´»è·ƒEpisodes: 1
  æœ€è¿‘æˆåŠŸç‡: 0.750
  å¹³å‡å¥–åŠ±: 1.023
  å¹³å‡æ­¥æ•°: 10.8
  å­¦åˆ°æŠ€èƒ½: 3 ä¸ª
  å­¦ä¹ æ•ˆç‡: 0.180
```

## ğŸ“ˆ è§‚æµ‹æ•°æ®è¯¦è§£

### 1. Episodeçº§æŒ‡æ ‡
- **æˆåŠŸç‡**: EpisodeæˆåŠŸå®Œæˆçš„æ¯”ä¾‹
- **å¹³å‡å¥–åŠ±**: Episodeçš„å¹³å‡æ€»å¥–åŠ±
- **å¹³å‡æ­¥æ•°**: Episodeçš„å¹³å‡æ‰§è¡Œæ­¥æ•°
- **æŠ€èƒ½ä½¿ç”¨ç‡**: ä½¿ç”¨æŠ€èƒ½çš„æ­¥æ•°æ¯”ä¾‹
- **é”™è¯¯ç‡**: å‘ç”Ÿé”™è¯¯çš„æ­¥æ•°æ¯”ä¾‹

### 2. æŠ€èƒ½å­¦ä¹ æŒ‡æ ‡
- **æŠ€èƒ½æ•°é‡**: å­¦åˆ°çš„ä¸åŒæŠ€èƒ½æ€»æ•°
- **å­¦ä¹ æ•ˆç‡**: æŠ€èƒ½å­¦ä¹ é€Ÿåº¦ï¼ˆæŠ€èƒ½æ•°/æ€»äº‹ä»¶æ•°ï¼‰
- **æŠ€èƒ½æˆåŠŸç‡**: å„æŠ€èƒ½çš„å¹³å‡æˆåŠŸç‡
- **ä½¿ç”¨é¢‘ç‡**: å„æŠ€èƒ½çš„ä½¿ç”¨æ¬¡æ•°ç»Ÿè®¡
- **æ”¹è¿›å¹…åº¦**: æŠ€èƒ½æˆåŠŸç‡çš„æå‡æƒ…å†µ

### 3. ç³»ç»Ÿæ€§èƒ½æŒ‡æ ‡
- **å¤„ç†å»¶è¿Ÿ**: äº‹ä»¶å¤„ç†çš„å¹³å‡å»¶è¿Ÿ
- **å†…å­˜ä½¿ç”¨**: ç³»ç»Ÿå†…å­˜å ç”¨æƒ…å†µ
- **é˜Ÿåˆ—çŠ¶æ€**: äº‹ä»¶é˜Ÿåˆ—çš„å¡«å……ç¨‹åº¦

## ğŸ”§ é«˜çº§é…ç½®

### è‡ªå®šä¹‰ç›‘æ§æŒ‡æ ‡
åœ¨ `observation_config.yaml` ä¸­é…ç½®ï¼š

```yaml
monitoring:
  episode_metrics:
    - "success_rate"
    - "avg_reward"
    - "efficiency_score"  # è‡ªå®šä¹‰æŒ‡æ ‡
  
  skill_metrics:
    - "learning_rate"
    - "adaptation_speed"  # è‡ªå®šä¹‰æŒ‡æ ‡
```

### å‘Šè­¦é…ç½®
```yaml
alerts:
  enabled: true
  performance_alerts:
    low_success_rate_threshold: 0.1
    high_error_rate_threshold: 0.3
```

### æ•°æ®å­˜å‚¨é…ç½®
```yaml
storage:
  event_queue_size: 10000
  trajectory_retention:
    max_episodes_per_experiment: 1000
    compress_old_trajectories: true
```

## ğŸ“ è¾“å‡ºæ–‡ä»¶ç»“æ„

```
logs/
â”œâ”€â”€ observable_experiments/           # ä¸»å®éªŒç›®å½•
â”‚   â”œâ”€â”€ evaluation/                  # è¯„ä¼°æ•°æ®
â”‚   â”œâ”€â”€ trajectories/               # è½¨è¿¹æ•°æ®
â”‚   â”œâ”€â”€ skills_*experiment*/        # æŠ€èƒ½æ•°æ®
â”‚   â””â”€â”€ intermediate_results.json   # ä¸­é—´ç»“æœ
â”œâ”€â”€ observation_reports/            # è§‚æµ‹æŠ¥å‘Š
â”‚   â”œâ”€â”€ stats_report_*.txt         # ç»Ÿè®¡æŠ¥å‘Š
â”‚   â”œâ”€â”€ skill_report_*.txt         # æŠ€èƒ½åˆ†ææŠ¥å‘Š
â”‚   â””â”€â”€ *.html                     # HTMLæ ¼å¼æŠ¥å‘Š
â””â”€â”€ observable_experiment.log      # ç³»ç»Ÿæ—¥å¿—
```

## ğŸ¯ è§‚æµ‹ç­–ç•¥å»ºè®®

### 1. å®æ—¶ç›‘æ§ç­–ç•¥
- **çŸ­æœŸå®éªŒ** (< 50 episodes): å¯ç”¨æ‰€æœ‰å¯è§†åŒ–åŠŸèƒ½
- **é•¿æœŸå®éªŒ** (> 200 episodes): é€‚å½“é™ä½æ›´æ–°é¢‘ç‡
- **å¤§è§„æ¨¡å®éªŒ**: ç¦ç”¨å®æ—¶å›¾è¡¨ï¼Œä½¿ç”¨æŠ¥å‘Šæ¨¡å¼

### 2. æ€§èƒ½ä¼˜åŒ–
- è°ƒæ•´ `event_batch_size` æ¥å¹³è¡¡å®æ—¶æ€§å’Œæ€§èƒ½
- ä½¿ç”¨ `max_memory_mb` é™åˆ¶å†…å­˜ä½¿ç”¨
- å¯¹äºç”Ÿäº§ç¯å¢ƒï¼Œè€ƒè™‘ç¦ç”¨è¯¦ç»†è½¨è¿¹è®°å½•

### 3. åˆ†æé‡ç‚¹
- **æŠ€èƒ½å­¦ä¹ **: å…³æ³¨æŠ€èƒ½å‘ç°æ—¶é—´çº¿å’ŒæˆåŠŸç‡æ¼”è¿›
- **å¯¹æ¯”åˆ†æ**: é‡ç‚¹è§‚å¯ŸåŸºçº¿vsç»éªŒå­¦ä¹ çš„å·®å¼‚
- **ç¨³å®šæ€§**: ç›‘æ§é•¿æœŸè¶‹åŠ¿å’Œæ–¹å·®
- **æ•ˆç‡**: å…³æ³¨æ­¥æ•°å’Œæ—¶é—´çš„å˜åŒ–

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **Webç•Œé¢æ— æ³•è®¿é—®**
   - æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨
   - ç¡®è®¤é˜²ç«å¢™è®¾ç½®
   - éªŒè¯Flaskå’ŒSocketIOå®‰è£…

2. **å¯è§†åŒ–å›¾è¡¨ä¸æ›´æ–°**
   - æ£€æŸ¥matplotlibåç«¯è®¾ç½®
   - ç¡®è®¤æ•°æ®æµæ˜¯å¦æ­£å¸¸
   - æŸ¥çœ‹æ§åˆ¶å°é”™è¯¯ä¿¡æ¯

3. **å†…å­˜ä½¿ç”¨è¿‡é«˜**
   - è°ƒæ•´ `event_queue_size`
   - å¯ç”¨è½¨è¿¹å‹ç¼©
   - å‡å°‘ä¿ç•™çš„å†å²æ•°æ®

### æ—¥å¿—åˆ†æ
ç³»ç»Ÿæ—¥å¿—ä½äº `logs/observable_experiment.log`ï¼ŒåŒ…å«ï¼š
- ç³»ç»Ÿå¯åŠ¨å’Œé…ç½®ä¿¡æ¯
- å®éªŒè¿›åº¦å’Œå…³é”®äº‹ä»¶
- é”™è¯¯å’Œå¼‚å¸¸è¯¦æƒ…
- æ€§èƒ½æŒ‡æ ‡

## ğŸ”„ ä¸ç°æœ‰æ¡†æ¶é›†æˆ

è§‚æµ‹ç³»ç»Ÿå¯ä»¥æ— ç¼é›†æˆåˆ°ç°æœ‰å®éªŒæ¡†æ¶ä¸­ï¼š

```python
# æ›¿æ¢åŸå§‹çš„ ExperimentRunner
from observable_experiment_runner import ObservableExperimentRunner

# ä½¿ç”¨ç›¸åŒçš„APIï¼Œè·å¾—é¢å¤–çš„è§‚æµ‹åŠŸèƒ½
runner = ObservableExperimentRunner("logs/experiments")
results = await runner.run_comparative_experiment(...)
```

## ğŸ“ æ”¯æŒå’Œæ‰©å±•

è§‚æµ‹ç³»ç»Ÿé‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼Œæ”¯æŒï¼š
- è‡ªå®šä¹‰æŒ‡æ ‡æ·»åŠ 
- æ–°çš„å¯è§†åŒ–ç»„ä»¶
- å¤–éƒ¨ç³»ç»Ÿé›†æˆ
- è‡ªå®šä¹‰æŠ¥å‘Šæ ¼å¼

å¦‚éœ€æ‰©å±•åŠŸèƒ½ï¼Œå¯ä»¥ï¼š
1. ç»§æ‰¿ç›¸åº”çš„åŸºç±»
2. æ·»åŠ æ–°çš„äº‹ä»¶ç±»å‹
3. å®ç°è‡ªå®šä¹‰åˆ†æå™¨
4. æ‰©å±•Webç•Œé¢

---

ğŸ‰ äº«å—æ‚¨çš„å¯è§‚æµ‹å®éªŒä¹‹æ—…ï¼å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶æˆ–æäº¤issueã€‚